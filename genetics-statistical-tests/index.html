<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testes Estatísticos para Genética</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.development.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      body {
        font-family: 'Inter', sans-serif;
      }
      .table-responsive {
        overflow-x: auto;
      }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // Importa o hook useState do React
        const { useState } = React;

        // Objeto contendo os ícones SVG para uso em toda a aplicação
        const icons = {
            'dna': (
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="h-6 w-6 text-indigo-500">
                    <path d="M10 20l-6-6M10 20a10 10 0 1 1 0-16M14 4l6 6M14 4a10 10 0 1 1 0 16"></path><path d="M12 2a10 10 0 0 0-4.5 1.5M12 2a10 10 0 0 1 4.5 1.5"></path><path d="M12 22a10 10 0 0 1-4.5-1.5M12 22a10 10 0 0 0 4.5-1.5"></path><path d="M12 12h-4v4"></path><path d="M12 12h4v-4"></path>
                </svg>
            ),
            'PlaySquare': (
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="h-5 w-5 mr-1"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><polygon points="10 8 16 12 10 16 10 8"></polygon></svg>
            ),
            'ChevronRight': (
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="h-5 w-5 ml-auto text-indigo-500"><path d="M9 18l6-6-6-6"></path></svg>
            ),
            'check': (
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="h-6 w-6 text-green-500"><polyline points="20 6 9 17 4 12"></polyline></svg>
            ),
            'xCircle': (
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="h-6 w-6 text-red-500"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>
            ),
            'arrowDown': (
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="h-5 w-5 text-indigo-500">
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <polyline points="19 12 12 19 5 12"></polyline>
                </svg>
            ),
        };

        // Conteúdo do infográfico em português
        const content = {
            title: 'Testes Estatísticos para Genética',
            restart: 'Reiniciar',
            intro: 'Entenda os testes estatísticos essenciais para análises de genética populacional e polimorfismos.',
            step1: {
                title: '1. Teste para Equilíbrio de Hardy-Weinberg (HWE)',
                description: 'Verifique se as frequências genotípicas de um polimorfismo em sua população estão de acordo com o modelo matemático de HWE, que assume ausência de forças evolutivas.',
                modelDescription: 'O modelo de Hardy-Weinberg descreve a relação matemática entre as frequências de alelos e genótipos em uma população que não está evoluindo. As frequências alélicas são representadas por **p** e **q**, e as genotípicas por **p²**, **2pq** e **q²**.',
                formulas: {
                    alelic: 'p + q = 1',
                    genotypic: 'p<sup>2</sup> + 2pq + q<sup>2</sup> = 1',
                },
                example: {
                    intro: '<strong>Exemplo:</strong> Para um polimorfismo com dois alelos (A e a), se a frequência do alelo A é p = 0.7 e a do alelo a é q = 0.3, as frequências genotípicas esperadas são:',
                    list: [
                        'Genótipo AA: p² = 0.7² = 0.49',
                        'Genótipo Aa: 2pq = 2 * 0.7 * 0.3 = 0.42',
                        'Genótipo aa: q² = 0.3² = 0.09',
                    ],
                },
                testName: 'Qui-quadrado (&chi;<sup>2</sup>)',
                testDescription: 'Compara as frequências genotípicas observadas com as frequências esperadas sob a lei de Hardy-Weinberg. É o teste mais comum para essa finalidade.',
            },
            step2: {
                title: (testName) => `2. Interpretação do Teste ${testName} para HWE`,
                description: 'Interprete o valor de p (p-value) para decidir se a população está em equilíbrio de Hardy-Weinberg.',
                interpretationOptions: [
                    {
                        title: 'Se o p-value &gt; 0.05',
                        description: 'A <strong>hipótese nula (H<sub>0</sub>)</strong> não é rejeitada. A população está em Equilíbrio de Hardy-Weinberg. Não há evidência estatística de desvio das frequências esperadas.',
                        icon: icons.check,
                    },
                    {
                        title: 'Se o p-value &le; 0.05',
                        description: 'A <strong>hipótese nula (H<sub>0</sub>)</strong> é rejeitada. A população não está em Equilíbrio de Hardy-Weinberg. Há evidência de desvio das frequências esperadas, indicando a atuação de forças evolutivas (seleção, migração etc.) ou erro na genotipagem.',
                        icon: icons.xCircle,
                    },
                ],
            },
            step3: {
                title: '3. Entendendo a Tabela de Contingência',
                description: 'A tabela de contingência é uma ferramenta fundamental para visualizar e analisar a relação entre duas variáveis categóricas. No contexto da genética, ela organiza as frequências observadas de genótipos entre diferentes grupos.',
                table: (
                    <div className="table-responsive w-full mt-4">
                        <table className="w-full text-sm text-gray-700 bg-white border border-gray-300 rounded-lg shadow-sm">
                            <thead className="bg-gray-200">
                                <tr className="text-gray-900">
                                    <th className="py-2 px-4 border-r border-gray-300">Grupos de Doença</th>
                                    <th className="py-2 px-4 border-r border-gray-300">Genótipo CC</th>
                                    <th className="py-2 px-4 border-r border-gray-300">Genótipo CT</th>
                                    <th className="py-2 px-4">Genótipo TT</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr className="border-t border-gray-300">
                                    <td className="py-2 px-4 border-r border-gray-300">Sem Doença</td>
                                    <td className="py-2 px-4 border-r border-gray-300">20</td>
                                    <td className="py-2 px-4 border-r border-gray-300">10</td>
                                    <td className="py-2 px-4">5</td>
                                </tr>
                                <tr className="border-t border-gray-300">
                                    <td className="py-2 px-4 border-r border-gray-300">Demência</td>
                                    <td className="py-2 px-4 border-r border-gray-300">15</td>
                                    <td className="py-2 px-4 border-r border-gray-300">12</td>
                                    <td className="py-2 px-4">8</td>
                                </tr>
                                <tr className="border-t border-gray-300">
                                    <td className="py-2 px-4 border-r border-gray-300">Alzheimer</td>
                                    <td className="py-2 px-4 border-r border-gray-300">30</td>
                                    <td className="py-2 px-4 border-r border-gray-300">25</td>
                                    <td className="py-2 px-4">15</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                )
            },
            step4: {
                title: '4. Teste para Comparar Frequências Genotípicas entre Grupos',
                description: 'Compare as distribuições das frequências genotípicas de um polimorfismo entre dois ou mais grupos (ex: casos vs. controles), para verificar se a distribuição é a mesma ou se há uma associação. A escolha do teste depende da sua amostra.',
                types: [
                    {
                        name: 'Teste Exato de Fisher',
                        condition: 'Use quando as células da sua tabela de contingência 2x2 têm valores esperados menores que 5. É o mais preciso para amostras pequenas.',
                    },
                    {
                        name: 'Teste do Qui-quadrado',
                        condition: 'Use quando todas as células da sua tabela de contingência têm valores esperados maiores ou iguais a 5. É o mais comum para amostras maiores.',
                    },
                ],
            },
            step5: {
                title: (testName) => `5. Interpretação do Teste ${testName}`,
                description: 'Analise o valor de p (p-value) para determinar se a distribuição genotípica é diferente entre os grupos.',
                interpretationOptions: [
                    {
                        title: 'Se o p-value &gt; 0.05',
                        description: 'A <strong>hipótese nula (H<sub>0</sub>)</strong> não é rejeitada. Não há evidência de associação estatística entre as frequências genotípicas e os grupos. As distribuições são consideradas semelhantes.',
                        icon: icons.check,
                    },
                    {
                        title: 'Se o p-value &le; 0.05',
                        description: 'A <strong>hipótese nula (H<sub>0</sub>)</strong> é rejeitada. Há evidência de associação estatística entre as frequências genotípicas e os grupos. As distribuições são consideradas diferentes.',
                        icon: icons.xCircle,
                    },
                ],
            },
        };

        function App() {
            const [activeTest, setActiveTest] = useState(null);
            const [activeComparativeTest, setActiveComparativeTest] = useState(null);

            const resetAll = () => {
                setActiveTest(null);
                setActiveComparativeTest(null);
            };

            const renderHWEItem = (step) => {
                return (
                    <div className="mt-6 p-6 rounded-2xl bg-indigo-50 border border-indigo-200">
                        <h3 className="text-xl font-bold text-indigo-700">O Modelo Matemático</h3>
                        <p className="mt-2 text-gray-700">
                            A lei de Hardy-Weinberg descreve a relação matemática entre as frequências de alelos e genótipos em uma população que não está evoluindo. As duas fórmulas principais são:
                        </p>
                        <div className="mt-4 p-4 bg-white rounded-lg shadow-sm">
                            <p className="font-mono text-gray-900">
                                Frequência Alélica: <strong>p + q = 1</strong>
                            </p>
                            <p className="font-mono text-gray-900 mt-2">
                                Frequência Genotípica: <strong>p<sup>2</sup> + 2pq + q<sup>2</sup> = 1</strong>
                            </p>
                        </div>
                        <p className="mt-4 text-gray-700">
                            <strong>Exemplo:</strong> Para um polimorfismo com dois alelos (A e a), se a frequência do alelo A é p = 0.7 e a do alelo a é q = 0.3, as frequências genotípicas esperadas são:
                        </p>
                        <ul className="list-disc list-inside mt-2 text-gray-700">
                            <li>Genótipo AA: p&sup2; = 0.7&sup2; = 0.49</li>
                            <li>Genótipo Aa: 2pq = 2 * 0.7 * 0.3 = 0.42</li>
                            <li>Genótipo aa: q&sup2; = 0.3&sup2; = 0.09</li>
                        </ul>

                        <div className="flex flex-col items-center justify-center mt-6">
                            <div className="my-4">
                                {icons['arrowDown']}
                            </div>
                            <button
                                onClick={() => {
                                    setActiveTest(step.testName);
                                }}
                                className={`w-full text-center p-4 rounded-lg shadow-sm transition-all duration-300 transform ${
                                    activeTest === step.testName ? 'bg-indigo-500 text-white ring-2 ring-indigo-500' : 'bg-indigo-100 hover:bg-indigo-200 text-indigo-700'
                                }`}
                            >
                                <span className="text-lg font-semibold" dangerouslySetInnerHTML={{ __html: step.testDescription }}></span>
                            </button>
                        </div>
                    </div>
                );
            };

            return (
                <div className="bg-gray-50 min-h-screen p-4 sm:p-8 md:p-12 font-sans antialiased text-gray-800">
                    <div className="container mx-auto max-w-4xl bg-white rounded-3xl shadow-xl p-6 md:p-12">
                        
                        {/* Cabeçalho */}
                        <div className="flex flex-col sm:flex-row items-start sm:items-center justify-between mb-8 pb-4 border-b border-gray-200">
                            <div>
                                <h1 className="text-2xl md:text-4xl font-bold text-gray-900">{content.title}</h1>
                            </div>
                            <div className="flex items-center space-x-4 mt-4 sm:mt-0">
                                <button
                                    onClick={resetAll}
                                    className="flex items-center text-sm font-semibold text-indigo-600 hover:text-indigo-800 transition-colors"
                                >
                                    {icons['PlaySquare']}
                                    {content.restart}
                                </button>
                            </div>
                        </div>
                        
                        <p className="text-gray-600 mb-6">{content.intro}</p>

                        {/* Etapa 1: Hardy-Weinberg (HWE) */}
                        <div className="h-px bg-gray-200 my-8"></div>
                        <h2 className="text-xl md:text-2xl font-bold mb-4 text-indigo-700">{content.step1.title}</h2>
                        <p className="text-gray-600 mb-6">{content.step1.description}</p>
                        
                        <div className="grid grid-cols-1 gap-4 mb-8">
                            {renderHWEItem(content.step1)}
                        </div>

                        {/* Etapa 2: Interpretação de HWE */}
                        {activeTest === content.step1.testName && (
                            <>
                                <div className="h-px bg-gray-200 my-8"></div>
                                <h2 className="text-xl md:text-2xl font-bold mb-4 text-indigo-700" dangerouslySetInnerHTML={{ __html: content.step2.title(content.step1.testName) }}></h2>
                                <p className="text-gray-600 mb-6">{content.step2.description}</p>
                                
                                <div className="space-y-6">
                                    {content.step2.interpretationOptions.map((option, index) => (
                                        <div key={index} className="bg-indigo-50 p-6 rounded-2xl border border-indigo-200">
                                            <div className="flex items-center space-x-3 mb-2">
                                                {option.icon}
                                                <h3 className="text-xl font-bold text-indigo-700" dangerouslySetInnerHTML={{ __html: option.title }}></h3>
                                            </div>
                                            <p className="text-gray-700" dangerouslySetInnerHTML={{ __html: option.description }}></p>
                                        </div>
                                    ))}
                                </div>
                            </>
                        )}
                        
                        {/* Etapa 3: Tabela de Contingência */}
                        {activeTest === content.step1.testName && (
                            <>
                                <div className="h-px bg-gray-200 my-8"></div>
                                <h2 className="text-xl md:text-2xl font-bold mb-4 text-indigo-700">{content.step3.title}</h2>
                                <p className="text-gray-600 mb-6">{content.step3.description}</p>
                                {content.step3.table}
                            </>
                        )}
                        
                        {/* Etapa 4: Comparação de Frequências */}
                        {activeTest === content.step1.testName && (
                            <>
                                <div className="h-px bg-gray-200 my-8"></div>
                                <h2 className="text-xl md:text-2xl font-bold mb-4 text-indigo-700">{content.step4.title}</h2>
                                <p className="text-gray-600 mb-6" dangerouslySetInnerHTML={{ __html: content.step4.description }}></p>
                                <div className="space-y-6">
                                    <h3 className="text-lg font-bold text-gray-900 text-center">Selecione o teste adequado para sua amostra:</h3>
                                    <div key="comparative-tests" className="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                        {content.step4.types.map(test => (
                                            <button
                                                key={test.name}
                                                onClick={() => setActiveComparativeTest(activeComparativeTest === test.name ? null : test.name)}
                                                className={`p-6 text-left rounded-lg shadow-sm transition-all duration-300 transform flex flex-col items-start w-full ${
                                                    activeComparativeTest === test.name ? 'bg-indigo-500 text-white ring-2 ring-indigo-500' : 'bg-gray-100 hover:bg-gray-200 text-gray-700'
                                                }`}
                                            >
                                                <h4 className={`text-lg font-bold ${activeComparativeTest === test.name ? 'text-white' : 'text-gray-900'}`}>{test.name}</h4>
                                                <p className={`mt-2 text-sm ${activeComparativeTest === test.name ? 'text-white' : 'text-gray-600'}`} dangerouslySetInnerHTML={{ __html: test.condition }}></p>
                                            </button>
                                        ))}
                                    </div>
                                </div>
                            </>
                        )}
                        
                        {/* Etapa 5: Interpretação de Comparação de Frequências */}
                        {activeComparativeTest && (
                            <>
                                <div className="h-px bg-gray-200 my-8"></div>
                                <h2 className="text-xl md:text-2xl font-bold mb-4 text-indigo-700" dangerouslySetInnerHTML={{ __html: content.step5.title(activeComparativeTest) }}></h2>
                                <p className="text-gray-600 mb-6">{content.step5.description}</p>
                                
                                <div className="space-y-6">
                                    {content.step5.interpretationOptions.map((option, index) => (
                                        <div key={index} className="bg-indigo-50 p-6 rounded-2xl border border-indigo-200">
                                            <div className="flex items-center space-x-3 mb-2">
                                                {option.icon}
                                                <h3 className="text-xl font-bold text-indigo-700" dangerouslySetInnerHTML={{ __html: option.title }}></h3>
                                            </div>
                                            <p className="text-gray-700" dangerouslySetInnerHTML={{ __html: option.description }}></p>
                                        </div>
                                    ))}
                                </div>
                            </>
                        )}
                    </div>
                </div>
            );
        }

        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(<App />);
    </script>
</body>
</html>
