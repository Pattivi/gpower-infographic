<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Análise de Poder em R</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.development.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      body {
        font-family: 'Inter', sans-serif;
      }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        const icons = {
            'code': (
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="h-6 w-6 text-indigo-500">
                    <polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline>
                </svg>
            ),
            'PlaySquare': (
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="h-5 w-5 mr-1"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><polygon points="10 8 16 12 10 16 10 8"></polygon></svg>
            ),
            'ChevronRight': (
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="h-5 w-5 ml-auto text-indigo-500"><path d="M9 18l6-6-6-6"></path></svg>
            )
        };

        const translations = {
            'pt': {
                title: 'Análise de Poder Estatístico em R',
                subtitle: 'Usando o Pacote `pwr`',
                restart: 'Reiniciar',
                intro: 'O pacote `pwr` é uma ferramenta essencial para realizar análises de poder estatístico de forma simples e direta no R. Ele cobre os testes mais comuns e ajuda a planejar a sua pesquisa. Clique em uma das funções abaixo para ver a sua aplicação.',
                step1Title: 'Funções do Pacote `pwr`',
                functions: [
                    {
                        name: '`pwr.t.test()`',
                        description: 'Para testes t, comparando médias de 1 ou 2 amostras.',
                        parameters: 'n, d, sig.level, power, type, alternative',
                        example: '## Exemplo: calcular o tamanho da amostra para um teste t\n\nlibrary(pwr)\n\npwr.t.test(d = 0.5, sig.level = 0.05, power = 0.80, type = "two.sample", alternative = "two.sided")',
                    },
                    {
                        name: '`pwr.anova.test()`',
                        description: 'Para análise de variância (ANOVA) de uma via.',
                        parameters: 'k, f, sig.level, power',
                        example: '## Exemplo: calcular o tamanho da amostra para uma ANOVA\n\nlibrary(pwr)\n\npwr.anova.test(k = 3, f = 0.25, sig.level = 0.05, power = 0.80)',
                    },
                    {
                        name: '`pwr.r.test()`',
                        description: 'Para testes de correlação (coeficiente de correlação de Pearson).',
                        parameters: 'n, r, sig.level, power, alternative',
                        example: '## Exemplo: calcular o tamanho da amostra para uma correlação\n\nlibrary(pwr)\n\npwr.r.test(r = 0.3, sig.level = 0.05, power = 0.80)',
                    },
                    {
                        name: '`pwr.2p.test()`',
                        description: 'Para comparar a proporção de dois grupos.',
                        parameters: 'h, n, sig.level, power',
                        example: '## Exemplo: calcular o tamanho da amostra para proporções\n\nlibrary(pwr)\n\npwr.2p.test(h = 0.2, sig.level = 0.05, power = 0.80)',
                    },
                ],
                explanationTitle: (funcName) => `Detalhes da Função ${funcName}`,
                parametersSection: 'Parâmetros Comuns',
                parametersDescription: 'Os parâmetros são os elementos-chave para o cálculo. Você preenche três deles para o R calcular o quarto.',
                paramList: [
                    { param: '`n`', description: 'Tamanho da amostra (o número de participantes).' },
                    { param: '`d`, `f`, ou `r`', description: 'Tamanho do efeito (a magnitude do efeito que você espera encontrar).' },
                    { param: '`sig.level`', description: 'Nível de significância (o valor de α, tipicamente 0.05).' },
                    { param: '`power`', description: 'Poder estatístico (a probabilidade de detectar um efeito real, tipicamente 0.80).' },
                ],
            },
            'en': {
                title: 'Statistical Power Analysis in R',
                subtitle: 'Using the `pwr` Package',
                restart: 'Restart',
                intro: 'The `pwr` package is an essential tool for performing statistical power analysis simply and directly in R. It covers the most common tests and helps you plan your research. Click on one of the functions below to see its application.',
                step1Title: '`pwr` Package Functions',
                functions: [
                    {
                        name: '`pwr.t.test()`',
                        description: 'For t-tests, comparing means of 1 or 2 samples.',
                        parameters: 'n, d, sig.level, power, type, alternative',
                        example: '## Example: calculate sample size for a t-test\n\nlibrary(pwr)\n\npwr.t.test(d = 0.5, sig.level = 0.05, power = 0.80, type = "two.sample", alternative = "two.sided")',
                    },
                    {
                        name: '`pwr.anova.test()`',
                        description: 'For one-way analysis of variance (ANOVA).',
                        parameters: 'k, f, sig.level, power',
                        example: '## Example: calculate sample size for an ANOVA\n\nlibrary(pwr)\n\npwr.anova.test(k = 3, f = 0.25, sig.level = 0.05, power = 0.80)',
                    },
                    {
                        name: '`pwr.r.test()`',
                        description: 'For correlation tests (Pearson\'s correlation coefficient).',
                        parameters: 'n, r, sig.level, power, alternative',
                        example: '## Example: calculate sample size for a correlation\n\nlibrary(pwr)\n\npwr.r.test(r = 0.3, sig.level = 0.05, power = 0.80)',
                    },
                    {
                        name: '`pwr.2p.test()`',
                        description: 'For comparing the proportion of two groups.',
                        parameters: 'h, n, sig.level, power',
                        example: '## Example: calculate sample size for proportions\n\nlibrary(pwr)\n\npwr.2p.test(h = 0.2, sig.level = 0.05, power = 0.80)',
                    },
                ],
                explanationTitle: (funcName) => `Details for Function ${funcName}`,
                parametersSection: 'Common Parameters',
                parametersDescription: 'The parameters are the key elements for the calculation. You provide three of them for R to calculate the fourth.',
                paramList: [
                    { param: '`n`', description: 'Sample size (the number of participants).' },
                    { param: '`d`, `f`, or `r`', description: 'Effect size (the magnitude of the effect you expect to find).' },
                    { param: '`sig.level`', description: 'Significance level (the α value, typically 0.05).' },
                    { param: '`power`', description: 'Statistical power (the probability of detecting a real effect, typically 0.80).' },
                ],
            }
        };

        function App() {
            const [activeFunction, setActiveFunction] = useState(null);
            const [language, setLanguage] = useState('pt');
            const text = translations[language];

            const resetAll = () => {
                setActiveFunction(null);
            };

            const handleLanguageChange = (e) => {
                setLanguage(e.target.value);
            };

            return (
                <div className="bg-gray-50 min-h-screen p-8 font-sans antialiased text-gray-800">
                    <div className="container mx-auto max-w-4xl bg-white rounded-3xl shadow-xl p-8 md:p-12">
                        
                        <div className="flex items-center justify-between mb-8 pb-4 border-b border-gray-200">
                            <div>
                                <h1 className="text-3xl md:text-4xl font-bold text-gray-900">{text.title}</h1>
                                <p className="text-gray-500">{text.subtitle}</p>
                            </div>
                            <div className="flex items-center space-x-4">
                                <select onChange={handleLanguageChange} value={language} className="bg-white border border-gray-300 rounded-lg p-2 text-sm font-semibold text-gray-700">
                                    <option value="pt">Português</option>
                                    <option value="en">English</option>
                                </select>
                                <button
                                    onClick={resetAll}
                                    className="flex items-center text-sm font-semibold text-indigo-600 hover:text-indigo-800 transition-colors"
                                >
                                    {icons['PlaySquare']}
                                    {text.restart}
                                </button>
                            </div>
                        </div>
                        
                        <p className="text-gray-600 mb-8">{text.intro}</p>

                        {/* Funções do Pacote */}
                        <h2 className="text-xl md:text-2xl font-bold mb-4 text-indigo-700">{text.step1Title}</h2>
                        <div className="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8">
                            {text.functions.map(func => (
                                <button
                                    key={func.name}
                                    onClick={() => setActiveFunction(func.name)}
                                    className={`p-6 rounded-2xl transition-all duration-300 transform ${
                                        activeFunction === func.name ? 'bg-indigo-100 ring-2 ring-indigo-500 shadow-md scale-105' : 'bg-gray-100 hover:bg-gray-200 hover:shadow-md'
                                    }`}
                                >
                                    <div className="flex items-center">
                                        {icons['code']}
                                        <span className="ml-3 text-lg font-semibold text-gray-900">{func.name}</span>
                                        {activeFunction === func.name && icons['ChevronRight']}
                                    </div>
                                    <p className="mt-2 text-sm text-left text-gray-600">{func.description}</p>
                                </button>
                            ))}
                        </div>

                        {/* Detalhes da Função Selecionada */}
                        {activeFunction && (
                            <>
                                <div className="h-px bg-gray-200 my-8"></div>
                                <h2 className="text-xl md:text-2xl font-bold mb-4 text-indigo-700">{text.explanationTitle(activeFunction)}</h2>
                                <p className="text-gray-600 mb-4 font-mono text-sm px-4 py-2 bg-gray-100 rounded-lg">
                                    {text.functions.find(f => f.name === activeFunction).parameters}
                                </p>
                                <p className="text-gray-700 mt-4 font-bold">{text.parametersSection}</p>
                                <p className="text-gray-600 mb-6">{text.parametersDescription}</p>
                                <ul className="list-disc list-inside space-y-2 text-gray-700 pl-4">
                                    {text.paramList.map(item => (
                                        <li key={item.param}>
                                            <strong className="font-mono">{item.param}</strong>: {item.description}
                                        </li>
                                    ))}
                                </ul>
                                <div className="mt-8">
                                    <h3 className="text-lg font-bold mb-2 text-indigo-700">Exemplo de Código</h3>
                                    <pre className="bg-gray-900 text-white p-4 rounded-lg overflow-x-auto">
                                        <code>
                                            {text.functions.find(f => f.name === activeFunction).example}
                                        </code>
                                    </pre>
                                </div>
                            </>
                        )}
                    </div>
                </div>
            );
        }

        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(<App />);
    </script>
</body>
</html>

